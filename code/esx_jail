ESX = nil
local playersInJail = {}

TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)

AddEventHandler('esx:playerLoaded', function(playerId, xPlayer)
        MySQL.Async.fetchAll('SELECT jail_time FROM users WHERE identifier = @identifier', {
                ['identifier'] = xPlayer.identifier
        }, function(result)
                if result[1] and result[1].jail_time > 0 then
                        TriggerEvent('esx_jail:sentTojail', xPlayer.source, result[1].jail_time, true)
                end
        end)
end)

AddEventHandler('esx:playerDropped', function(playerId, reason)
        playersInJail[playerId = nil
end)

MySQL.ready(function()
        Citizen.Wait
